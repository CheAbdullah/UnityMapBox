


var geoPackageLayer = L.geoPackageFeatureLayer([], {
  geoPackageUrl: 'mycustomgeopackage.gpkg',
  layerName: 'temm',
  style: function(feature) {
    return {
      color: '#F00',
      weight: 1,
      opacity: 0.5,
    };
  },
  onEachFeature: function( feature, layer){
    var name = feature.properties.city_served;
    layer.bindPopup('Name: ' + name ).openPopup();
  }
}).addTo(map);
  
function popupFormat(search) {
  var point = turf.point([search.result.x, search.result.y]);
  var layers = geoPackageLayer.getLayers();
  var featureInfo = '';
  for (var i = 0; i < layers.length; i++) {
    if (turf.booleanPointInPolygon(point, layers[i].feature)) {
      featureInfo = '<br>Name: ' + layers[i].feature.properties.city_served;
      break;
    }
  };
  return(search.result.label + featureInfo);
}

const searchControl = new GeoSearchControl({
  provider: provider,
  autoComplete: true
  autoCompleteDelay: 250,
  style: 'bar',
  popupFormat: popupFormat
});
