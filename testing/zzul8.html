<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>Swipe between maps</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
        .mapboxgl-popup {
        max-width: 400px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;}
        #menu {
        position: absolute;
        background: #fff;
        padding: 10px;
        font-family: 'Open Sans', sans-serif;}
        #map-ui {
    position:absolute;
    top:200px;left:5px;
    z-index:100;
    }
    #map-ui ul {
      list-style:none;
      margin:0;padding:0;
      }
      #map-ui a {
        font-size:13px;
        background:#FFF;
        color:#3C4E5A;
        display:block;
        margin:0;padding:0;
        border:1px solid #BBB;
        border-bottom-width:0;
        min-width:138px;
        padding:10px;
        text-decoration:none;
        }
      #map-ui a:hover { background:#ECF5FA; }
      #map-ui li:last-child a {
        border-bottom-width:1px;
        -webkit-border-radius:0 0 3px 3px;
                border-radius:0 0 3px 3px;
        }
      #map-ui li:first-child a {
        -webkit-border-radius:3px 3px 0 0;
                border-radius:3px 3px 0 0;
              }
      #map-ui a.active {
        background:#3887BE;
        border-color:#3887BE;
        color:#FFF;
        }

    #marker {
        background-image: url('/mapbox-gl-js/assets/washington-monument.jpg');
        background-size: cover;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;}
    
        .coordinates {
    background: rgba(0,0,0,0.5);
    color: #fff;
    position: absolute;
    bottom: 10px;
    left: 10px;
    padding:5px 10px;
    margin: 0;
    font-size: 11px;
    line-height: 18px;
    border-radius: 3px;
    display: none;
}

    </style>
</head>
<body>
    <style type='text/css'>
        #info {
            display: block;
            position: relative;
            margin-top: 100px;
            margin-left: 350px;
            width: 30%;
            padding: 10px;
            border: none;
            border-radius: 3px;
            font-size: 12px;
            text-align: center;
            color: #00f;
            background: #fff;
            z-index:101;
        }
        
    </style>
    

<style>
body {
    overflow: hidden;
}

body * {
   -webkit-touch-callout: none;
     -webkit-user-select: none;
        -moz-user-select: none;
         -ms-user-select: none;
             user-select: none;
}

.map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
}
</style>
<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.css' type='text/css' />

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.1/mapbox-gl-directions.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v3.1.1/mapbox-gl-directions.css' type='text/css' />

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.1.1/mapbox-gl-geocoder.min.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v2.1.1/mapbox-gl-geocoder.css' type='text/css' />


<pre id='info'></pre>
<div id='before' class='map'>
    <div id='map-ui'>
        <ul>
          <li><a href='#' class='active' id='radar'>Radar</a></li>
          <li><a href='#' class='active' id='clouds'>Clouds</a></li>
          <li><a href='#' class='active' id='precip'>Precipitation</a></li>
        </ul>
      </div>
</div>
<div id='after' class='map'></div>
<div id='menu'>
    <input id='cjaudgl840gn32rnrepcb9b9g' type='radio' name='rtoggle' value='cjaudgl840gn32rnrepcb9b9g'' checked='checked'>
    <label for='cjaudgl840gn32rnrepcb9b9g'>basic</label>
    <input id='streets-v9' type='radio' name='rtoggle' value='streets-v9'>
    <label for='streets-v9'>streets</label>
    <input id='bright-v9' type='radio' name='rtoggle' value='bright-v9'>
    <label for='bright-v9'>bright</label>
    <input id='light-v9' type='radio' name='rtoggle' value='light-v9'>
    <label for='light-v9'>light</label>
    <input id='dark-v9' type='radio' name='rtoggle' value='dark-v9'>
    <label for='dark-v9'>dark</label>
    <input id='satellite-v9' type='radio' name='rtoggle' value='satellite-v9'>
    <label for='satellite-v9'>satellite</label>
</div>
<div id='map1'></div>
<div id='map2'></div>
<pre id='coordinates' class='coordinates'></pre>

<!-- 14.67/3.8109/103.34994/0/60 -->
<!-- 16.96/53.347268/-6.259142/-143.2/53 -->
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY2hlenVsa2hhaXJpIiwiYSI6ImNqYXlob25nMjEzZHkyd3Noam1jc3EwMm4ifQ.RijbHD5-xQYubqDS9dOjyQ'; // [-74.0066, 40.7135],
var beforeMap = new mapboxgl.Map({
    container: 'before',
    style: 'mapbox://styles/mapbox/cjaudgl840gn32rnrepcb9b9g',
    center: [103.34994,3.8109],
    zoom: 14.67,
    pitch: 60,
    bearing: 0,
    hash: true,
});


var afterMap = new mapboxgl.Map({
    container: 'after',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [103.34994,3.8109],
    zoom: 14.67,
    pitch: 60,
    bearing: 0,
    hash: true,
});

var map = new mapboxgl.Compare(beforeMap, afterMap, {
    // Set this to enable comparing two maps by mouse movement:
    // mousemove: true
});

var coordinates = document.getElementById('coordinates');

var mindate = new Date("10/01/2017").getTime()
var maxdate = new Date("01/04/2018").getTime()
afterMap.on('load', function() {

    // add source to map
    //afterMap.addSource('earthengine', {
    //type: 'raster',
    //tiles: [`http://earthengine.google.org/static/hansen_2013/gain/{z}/{x}/{y}.png`],
    //});
    
    //afterMap.addLayer({
    //id: 'earthengine',
    //source: 'earthengine',
    //type: 'raster',
    //minzoom: 0,
    //maxzoom: 22,
    //});
    
    //var mapillarySource = {
    //    type: 'vector',
    //    tiles: ['http://d25uarhxywzl1j.cloudfront.net/v0.1/{z}/{x}/{y}.mvt'],
    //    minzoom: 0,
    //    maxzoom: 14
    ///};
    
    //afterMap.addSource('mapillary', mapillarySource);
    //afterMap.addLayer({
    //    'id': 'mapillary',
    //    'type': 'line',
    //    'source': 'mapillary',
    //   'source-layer': 'mapillary-sequences',
    //    'filter': ['all',
    //               ['>=', 'captured_at', mindate],
    //               ['<=', 'captured_at', maxdate]],
    //    'layout': {
    //        'line-cap': 'round',
    //        'line-join': 'round'
    //    },
    //    'paint': {
    //        'line-opacity': 0.6,
    //        'line-color':   'rgb(53, 175, 109)',
    //        'line-width':   2
    //    },
    //});

    //afterMap.addSource("quakes", {
    //    "type": "geojson",
    //    "data": "http://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson"
    //});
 
    // Once you have a datasource defined, you need to add a layer from that data source to the map.
    // We could, for example, add only earthquakes magnitude 4.0+. Here we just tell it
    // to take all of the data and style it as a circle.
    //var mags = [0,1,2,3,4,5,6,7,8,9,10];
    //for(var i=0; i < mags.length; i++) {
    //  var mag = mags[i];
    //  afterMap.addLayer({
    //    "id": "quakes-"+mag,
    //    "type": "circle",
    //    "source": "quakes",
    //    'z-index':'101',
     //   "filter": ["all", [">=", "mag", mag], ["<", "mag", mag+1]],
     //   "paint": {
     //       "circle-radius": Math.pow(mag,2)/1.5,
     //       "circle-color": "#ff0000",
     //       "circle-opacity": 0.5
     //   }
     // });
    //}
    // add source to map
    //afterMap.addSource('weatherSource', {
    //type: 'raster',
    
    //tiles: [`http://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=54ec60f02ad844c6d76b8b64b62819e3`],
    //});
    
    //afterMap.addLayer({
    //id: 'weatherSource',
    //source: 'weatherSource',
    //type: 'raster',
    //minzoom: 0,
    //maxzoom: 22,
    //'z-index':'103',
    //});
    //'% Forest Cover 2010': L.tileLayer('http://earthengine.google.org/static/hansen_2013/tree_alpha/{z}/{x}/{y}.png').addTo(map),
    //'Loss/Extent/Gain (Red/Green/Blue)': L.tileLayer('http://earthengine.google.org/static/hansen_2013/loss_forest_gain/{z}/{x}/{y}.png'),
    //'Loss': L.tileLayer('http://earthengine.google.org/static/hansen_2013/loss/{z}/{x}/{y}.png'),
    //'Gain': L.tileLayer('http://earthengine.google.org/static/hansen_2013/gain/{z}/{x}/{y}.png')

    

});

beforeMap.on('load', function() {
    // Insert the layer beneath any symbol layer.
    var layers = beforeMap.getStyle().layers;

    var labelLayerId;
    for (var i = 0; i < layers.length; i++) {
        if (layers[i].type === 'symbol' && layers[i].layout['text-field']) {
            labelLayerId = layers[i].id;
            break;
        }
    }

    beforeMap.addSource('point', {
        "type": "geojson",
        "data": pointOnCircle
    });

    beforeMap.addLayer({
        "id": "point",
        "source": "point",
        "type": "circle",
        "paint": {
            "circle-radius": 10,
            "circle-color": "#007cbf"
        }
    });

    beforeMapmap.addLayer({
        'id': 'wms-test-layer',
        'type': 'raster',
        'source': {
            'type': 'raster',
            'tiles': [
                'https://geodata.state.nj.us/imagerywms/Natural2015?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.1&request=GetMap&srs=EPSG:3857&width=256&height=256&layers=Natural2015'
            ],
            'tileSize': 256
        },
        'paint': {}
    }, 'aeroway-taxiway');

    beforeMap.addLayer({
        'id': '3d-buildings',
        'source': 'composite',
        'source-layer': 'building',
        'filter': ['==', 'extrude', 'true'],
        'type': 'fill-extrusion',
        'minzoom': 15,
        'paint': {
            'fill-extrusion-color': '#aaa',

            // use an 'interpolate' expression to add a smooth transition effect to the
            // buildings as the user zooms in
            'fill-extrusion-height': [
                "interpolate", ["linear"], ["zoom"],
                15, 0,
                15.05, ["get", "height"]
            ],
            'fill-extrusion-base': [
                "interpolate", ["linear"], ["zoom"],
                15, 0,
                15.05, ["get", "min_height"]
            ],
            'fill-extrusion-opacity': .6
        }
    }, labelLayerId);
    

    beforeMap.addSource('contours', {
        type: 'vector',
        url: 'mapbox://mapbox.mapbox-terrain-v2'
    });
    beforeMap.addLayer({
        'id': 'contours',
        'type': 'line',
        'source': 'contours',
        'source-layer': 'contour',
        'layout': {
            'visibility': 'visible',
            'line-join': 'round',
            'line-cap': 'round'
        },
        'paint': {
            'line-color': '#877b59',
            'line-width': 1
        }
    }); 

    beforeMap.addSource('dem', {
        "type": "raster-dem",
        "url": "mapbox://mapbox.terrain-rgb"
    });
    beforeMap.addLayer({
        "id": "hillshading",
        "source": "dem",
        "type": "hillshade"
    // insert below waterway-river-canal-shadow;
    // where hillshading sits in the Mapbox Outdoors style
    }, 'waterway-river-canal-shadow');


    beforeMap.addLayer({
        "id": "places",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [{
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Test Data 1</strong><p>No Data Available 1</p>",
                        "number":"00000000000001",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-6.259142,53.347268]
                    }
                }, {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Test Data 2</strong><p>No Data Available 2</p>",
                        "number":"00000000000002",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-6.2591,53.3472]
                    }}
                    , {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Test Data 3</strong><p>No Data Available 3</p>",
                        "number":"00000000000003",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-6.258,53.3471]
                    }}
                    , {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Test Data 4</strong><p>No Data Available 4</p>",
                        "number":"00000000000004",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-6.257,53.3470]
                    }}
                    , {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Test Data 5</strong><p>No Data Available 5</p>",
                        "number":"00000000000005",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-6.256,53.3469]
                    }}
                    , {
                    "type": "Feature",
                    "properties": {
                        "description": "<strong>Test Data 6</strong><p>No Data Available 6</p>",
                        "number":"00000000000006",
                        "icon": "star"
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [-6.255,53.3468]
                    }
                }
                ]
            }
        },
        "layout": {
            "icon-image": "{icon}-15",
            "icon-allow-overlap": true
        }
    });

    

    
});



beforeMap.on('mousemove', function (e) {
    document.getElementById('info').innerHTML =
        // e.point is the x, y coordinates of the mousemove event relative
        // to the top-left corner of the map
        JSON.stringify(e.point) + '<br />' +
        // e.lngLat is the longitude, latitude geographical position of the event
        JSON.stringify(e.lngLat);
});

beforeMap.addControl(new MapboxDirections({
    accessToken: mapboxgl.accessToken
}), 'top-left');
beforeMap.addControl(new MapboxGeocoder({
            accessToken: mapboxgl.accessToken
}), 'top-right');
// Add zoom and rotation controls to the map.
beforeMap.addControl(new mapboxgl.NavigationControl());

// When a click event occurs on a feature in the places layer, open a popup at the
    // location of the feature, with description HTML from its properties.
    beforeMap.on('click', 'places', function (e) {
        new mapboxgl.Popup()
            .setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.description)
            .addTo(beforeMap);
    });

    // Change the cursor to a pointer when the mouse is over the places layer.
    beforeMap.on('mouseenter', 'places', function () {
        beforeMap.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    beforeMap.on('mouseleave', 'places', function () {
        beforeMap.getCanvas().style.cursor = '';
    });

    
      
    

// Create a popup, but don't add it to the map yet.
var popup = new mapboxgl.Popup({
    closeButton: false,
    closeOnClick: false
});

beforeMap.on('mouseenter', 'places', function(e) {
    // Change the cursor style as a UI indicator.
    beforeMap.getCanvas().style.cursor = 'pointer';

    // Populate the popup and set its coordinates
    // based on the feature found.
    popup.setLngLat(e.features[0].geometry.coordinates)
        .setHTML(e.features[0].properties.description)
        .addTo(beforeMap);
});

beforeMap.on('mouseleave', 'places', function() {
    beforeMap.getCanvas().style.cursor = '';
    popup.remove();
});

var layerList = document.getElementById('menu');
var inputs = layerList.getElementsByTagName('input');

function switchLayer(layer) {
    var layerId = layer.target.id;
    beforeMap.setStyle('mapbox://styles/mapbox/' + layerId);
}

for (var i = 0; i < inputs.length; i++) {
    inputs[i].onclick = switchLayer;
}



</script>

</body>
</html>